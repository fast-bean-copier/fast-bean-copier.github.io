<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«é€Ÿå…¥é—¨ - Fast Bean Copier</title>
    <link rel="icon" type="image/png" href="../favicon.png">
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <img src="../logo.png" alt="Fast Bean Copier Logo" class="logo">
                <h1>ğŸš€ Fast Bean Copier</h1>
            </div>
            <p>é«˜æ€§èƒ½çš„ Java Bean æ‹·è´å·¥å…·</p>
            <div class="version-badge">ç‰ˆæœ¬ 1.3.0</div>
        </div>
    </header>
    
    <nav>
        <ul>
            <li><a href="index.html">é¦–é¡µ</a></li>
            <li><a href="getting-started.html" class="active">å¿«é€Ÿå…¥é—¨</a></li>
            <li><a href="reference.html">å‚è€ƒæ–‡æ¡£</a></li>
            <li><a href="api.html">API æ–‡æ¡£</a></li>
            <li><a href="faq.html">å¸¸è§é—®é¢˜</a></li>
            <li><a href="summary.html">é¡¹ç›®æ€»ç»“</a></li>
            <li><a href="changelog.html">æ›´æ–°æ—¥å¿—</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <div class="content">
            <h1>Fast Bean Copier å¿«é€Ÿå…¥é—¨æŒ‡å—</h1>
            
            <div class="highlight-box">
                <p><strong>v1.3 æ–°ç‰¹æ€§ï¼š</strong>æ›´æ–°ç°æœ‰å¯¹è±¡ï¼ˆupdateDto/updateEntityï¼‰ã€æ˜ å°„å‰å›è°ƒï¼ˆbeforeMappingï¼‰ã€æ¡ä»¶æ˜ å°„ï¼ˆconditionï¼‰ã€é»˜è®¤å€¼å’Œå¸¸é‡ï¼ˆdefaultValue/constantï¼‰ã€å…¨å±€é…ç½®ï¼ˆ@CopyTargetConfigï¼‰ã€Null å€¼å¤„ç†ç­–ç•¥ï¼ˆNullValueStrategyï¼‰ã€‚</p>
            </div>
            
            <h2>5 åˆ†é’Ÿå¿«é€Ÿå¼€å§‹</h2>
            
            <h3>æ­¥éª¤ 1ï¼šæ·»åŠ ä¾èµ–</h3>
            <p>åœ¨æ‚¨çš„ <code>pom.xml</code> ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p>
            <pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.github.jackieonway&lt;/groupId&gt;
    &lt;artifactId&gt;fast-bean-copier-annotations&lt;/artifactId&gt;
    &lt;version&gt;1.3.0&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;com.github.jackieonway&lt;/groupId&gt;
    &lt;artifactId&gt;fast-bean-copier-processor&lt;/artifactId&gt;
    &lt;version&gt;1.3.0&lt;/version&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
            
            <h3>æ­¥éª¤ 2ï¼šå®šä¹‰æºç±»</h3>
            <pre><code>public class User {
    private Long id;
    private String name;
    private String email;
    private Integer age;
    
    // getter/setter...
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
    
    public Integer getAge() { return age; }
    public void setAge(Integer age) { this.age = age; }
}</code></pre>
            
            <h3>æ­¥éª¤ 3ï¼šå®šä¹‰ DTO ç±»</h3>
            <pre><code>import com.github.jackieonway.copier.annotation.CopyTarget;

@CopyTarget(source = User.class)
public class UserDto {
    private Long id;
    private String name;
    private String email;
    private Integer age;
    
    // getter/setter...
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
    
    public Integer getAge() { return age; }
    public void setAge(Integer age) { this.age = age; }
}</code></pre>
            
            <h3>æ­¥éª¤ 4ï¼šç¼–è¯‘</h3>
            <pre><code>mvn clean compile</code></pre>
            <p>ç¼–è¯‘å®Œæˆåï¼ŒFast Bean Copier ä¼šè‡ªåŠ¨ç”Ÿæˆ <code>UserDtoCopier</code> ç±»ã€‚</p>
            
            <h3>æ­¥éª¤ 5ï¼šä½¿ç”¨</h3>
            <pre><code>// åˆ›å»ºæºå¯¹è±¡
User user = new User();
user.setId(1L);
user.setName("å¼ ä¸‰");
user.setEmail("zhangsan@example.com");
user.setAge(25);

// è½¬æ¢ä¸º DTO
UserDto userDto = UserDtoCopier.toDto(user);

// æ‰“å°ç»“æœ
System.out.println("ID: " + userDto.getId());
System.out.println("Name: " + userDto.getName());
System.out.println("Email: " + userDto.getEmail());
System.out.println("Age: " + userDto.getAge());</code></pre>
            
            <h2>å¸¸è§åœºæ™¯</h2>
            
            <h3>åœºæ™¯ 1ï¼šå¿½ç•¥æ•æ„Ÿå­—æ®µ</h3>
            <pre><code>@CopyTarget(source = User.class, ignore = {"password"})
public class UserDto {
    private Long id;
    private String name;
    private String email;
    // password å­—æ®µä¸ä¼šè¢«æ‹·è´
}</code></pre>
            
            <h3>åœºæ™¯ 2ï¼šæ‰¹é‡è½¬æ¢</h3>
            <pre><code>List&lt;User&gt; users = userRepository.findAll();
List&lt;UserDto&gt; userDtos = UserDtoCopier.toDtoList(users);</code></pre>
            
            <h3>åœºæ™¯ 3ï¼šåŒå‘è½¬æ¢</h3>
            <pre><code>// ä» DTO è½¬æ¢ä¸ºå®ä½“
User user = UserDtoCopier.fromDto(userDto);

// ä¿å­˜åˆ°æ•°æ®åº“
userRepository.save(user);

// å†è½¬æ¢å› DTO
UserDto response = UserDtoCopier.toDto(user);</code></pre>
            
            <h3>åœºæ™¯ 4ï¼šé›†åˆè½¬æ¢</h3>
            <pre><code>// List è½¬æ¢
List&lt;UserDto&gt; dtos = UserDtoCopier.toDtoList(users);

// Set è½¬æ¢
Set&lt;UserDto&gt; dtoSet = UserDtoCopier.toDtoSet(users);

// åå‘è½¬æ¢
List&lt;User&gt; users = UserDtoCopier.fromDtoList(dtos);
Set&lt;User&gt; userSet = UserDtoCopier.fromDtoSet(dtoSet);</code></pre>
            
            <h3>åœºæ™¯ 5ï¼šé›†åˆæ·±æ‹·è´ï¼ˆåµŒå¥—å¯¹è±¡ï¼‰</h3>
            <pre><code>Order order = new Order(1L,
        Arrays.asList("paid", "delivered"),
        Collections.singletonList(new User(1L, "Tom", "tom@test.com", 20)));

OrderDto orderDto = OrderDtoCopier.toDto(order);
List&lt;OrderDto&gt; orderDtos = OrderDtoCopier.toDtoList(Collections.singletonList(order));

// åå‘è½¬æ¢
Order restored = OrderDtoCopier.fromDto(orderDto);
List&lt;Order&gt; restoredList = OrderDtoCopier.fromDtoList(orderDtos);</code></pre>
            
            <h3>åœºæ™¯ 6ï¼šæ•°ç»„ä¸ Map æ·±æ‹·è´</h3>
            <pre><code>ArrayHolder holder = new ArrayHolder(
        1L,
        new String[]{"a", "b"},
        new int[]{1, 2, 3},
        new User[]{new User(1L, "Jerry", "j@test.com", 18)}
);
ArrayHolderDto holderDto = ArrayHolderDtoCopier.toDto(holder);
ArrayHolder restored = ArrayHolderDtoCopier.fromDto(holderDto);

MapHolder mapHolder = new MapHolder(
        1L,
        Collections.singletonMap("k1", "v1"),
        Collections.singletonMap("u1", new User(2L, "Lucy", "l@test.com", 22))
);
MapHolderDto mapHolderDto = MapHolderDtoCopier.toDto(mapHolder);
MapHolder restoredMapHolder = MapHolderDtoCopier.fromDto(mapHolderDto);</code></pre>
            
            <h3>åœºæ™¯ 7ï¼šDTO åå‘æ‹·è´</h3>
            <pre><code>UserDto dto = new UserDto(1L, "Amy", "amy@test.com", 25);
User entity = UserDtoCopier.fromDto(dto);

Set&lt;UserDto&gt; dtoSet = new LinkedHashSet&lt;&gt;(Collections.singleton(dto));
Set&lt;User&gt; entities = UserDtoCopier.fromDtoSet(dtoSet);</code></pre>
            
            <h2>v1.2 æ–°åŠŸèƒ½</h2>
            
            <h3>å¤šå¯¹ä¸€æ˜ å°„</h3>
            <pre><code>@CopyTarget(source = Person.class)
public class PersonDto {
    @CopyField(source = {"firstName", "lastName"}, 
               expression = "java(source.getFirstName() + \" \" + source.getLastName())")
    private String fullName;
}</code></pre>
            
            <h3>ä¸€å¯¹å¤šæ˜ å°„</h3>
            <pre><code>@CopyTarget(source = FullNameSource.class)
public class NameDto {
    @CopyField(source = "fullName", 
               expression = "java(source.getFullName().split(\" \")[0])")
    private String firstName;
}</code></pre>
            
            <h3>æ•°å­—æ ¼å¼åŒ–</h3>
            <pre><code>@CopyField(converter = NumberFormatter.class, format = "#,##0.00å…ƒ")
private String priceText;  // 1234.5 -> "1,234.50å…ƒ"</code></pre>
            
            <h3>æ—¥æœŸæ ¼å¼åŒ–</h3>
            <pre><code>@CopyField(converter = DateFormatter.class, format = "yyyy-MM-dd HH:mm:ss")
private String createTimeText;  // LocalDateTime -> "2025-12-29 10:30:00"</code></pre>
            
            <h3>è‡ªå®šä¹‰è½¬æ¢å™¨</h3>
            <pre><code>@CopyTarget(source = Person.class, uses = PersonConverter.class)
public class PersonDto {
    @CopyField(qualifiedByName = "formatAge")
    private String ageText;
}</code></pre>
            
            <h3>Spring é›†æˆ</h3>
            <pre><code>@CopyTarget(source = User.class, componentModel = ComponentModel.SPRING)
public class UserDto { }

@Service
public class UserService {
    @Autowired
    private UserDtoCopier userDtoCopier;
    
    public UserDto convert(User user) {
        return userDtoCopier.toDto(user);
    }
}</code></pre>
            
            <h3>å‡½æ•°å¼å®šåˆ¶</h3>
            <pre><code>UserDto dto = UserDtoCopier.toDto(user, result -> {
    result.setDisplayName(result.getName().toUpperCase());
    return result;
});

// æ‰¹é‡è½¬æ¢æ—¶ä¹Ÿæ”¯æŒ
List&lt;UserDto&gt; dtos = UserDtoCopier.toDtoList(users, result -> {
    result.setTimestamp(System.currentTimeMillis());
    return result;
});

// åå‘è½¬æ¢
User entity = UserDtoCopier.fromDto(userDto, result -> {
    result.setLastSynced(Instant.now());
    return result;
});

// Set è½¬æ¢
Set&lt;UserDto&gt; dtoSet = UserDtoCopier.toDtoSet(userSet, result -> {
    result.setSource("batch");
    return result;
});</code></pre>
            <p><strong>æ³¨æ„</strong>ï¼šMap å’Œæ•°ç»„æ–¹æ³•ï¼ˆ<code>toDtoMap</code>ã€<code>toDtoArray</code> ç­‰ï¼‰æš‚ä¸æ”¯æŒå‡½æ•°å¼é‡è½½ã€‚</p>
            
            <h2>v1.3 æ–°åŠŸèƒ½</h2>
            
            <h3>æ›´æ–°ç°æœ‰å¯¹è±¡</h3>
            <pre><code>// æ›´æ–°å·²å­˜åœ¨çš„ DTO å¯¹è±¡
UserDto existingDto = new UserDto();
existingDto.setName("åŸå§‹åç§°");
UserDtoCopier.updateDto(existingDto, user);
// existingDto çš„å­—æ®µè¢«æ›´æ–°ä¸º user çš„å€¼

// åå‘æ›´æ–°å®ä½“å¯¹è±¡
User existingUser = new User();
UserDtoCopier.updateEntity(existingUser, userDto);</code></pre>
            
            <h3>æ˜ å°„å‰å›è°ƒ</h3>
            <pre><code>@CopyTarget(source = User.class, beforeMapping = "validateAndPrepare")
public class UserDto {
    private Long id;
    private String name;
    
    // æ˜ å°„å‰å›è°ƒæ–¹æ³•ï¼ˆå¿…é¡»æ˜¯ default æ–¹æ³•ï¼‰
    default void validateAndPrepare(User source) {
        if (source.getName() == null) {
            throw new IllegalArgumentException("Name cannot be null");
        }
    }
}</code></pre>
            
            <h3>æ¡ä»¶æ˜ å°„</h3>
            <pre><code>@CopyTarget(source = User.class)
public class UserDto {
    // åªæœ‰å½“æºå­—æ®µä¸ä¸º null æ—¶æ‰æ‰§è¡Œæ˜ å°„
    @CopyField(condition = "java(source.getName() != null)")
    private String name;
    
    // å¤æ‚æ¡ä»¶
    @CopyField(condition = "java(source.getAge() != null && source.getAge() > 0)")
    private Integer age;
}</code></pre>
            
            <h3>é»˜è®¤å€¼</h3>
            <pre><code>@CopyTarget(source = User.class)
public class UserDto {
    // å½“æºå­—æ®µä¸º null æ—¶ä½¿ç”¨é»˜è®¤å€¼
    @CopyField(defaultValue = "æœªçŸ¥")
    private String name;
    
    @CopyField(defaultValue = "0")
    private Integer age;
}</code></pre>
            
            <h3>å¸¸é‡å€¼</h3>
            <pre><code>@CopyTarget(source = User.class)
public class UserDto {
    // ç›´æ¥è®¾ç½®å¸¸é‡å€¼ï¼Œä¸ä¾èµ–æºå­—æ®µ
    @CopyField(constant = "SYSTEM")
    private String createdBy;
    
    @CopyField(constant = "1.3.0")
    private String version;
}</code></pre>
            
            <h3>å…¨å±€é…ç½®</h3>
            <pre><code>// package-info.java
@CopyTargetConfig(
    componentModel = ComponentModel.SPRING,
    nullValueStrategy = NullValueStrategy.IGNORE
)
package com.example.dto;

import com.github.jackieonway.copier.annotation.*;</code></pre>
            
            <h3>Null å€¼å¤„ç†ç­–ç•¥</h3>
            <pre><code>// IGNOREï¼šå¿½ç•¥ null å€¼ï¼Œä¸æ›´æ–°ç›®æ ‡å­—æ®µï¼ˆé»˜è®¤ï¼‰
// REPLACEï¼šæ›¿æ¢ null å€¼ï¼Œå°†ç›®æ ‡å­—æ®µè®¾ç½®ä¸º null

@CopyTargetConfig(nullValueStrategy = NullValueStrategy.REPLACE)
package com.example.dto;</code></pre>
            
            <h2>æ•…éšœæ’é™¤</h2>
            
            <h3>é—®é¢˜ï¼šç”Ÿæˆçš„ Copier ç±»æœªå‡ºç°</h3>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ol>
                <li>ç¡®ä¿ä½¿ç”¨äº† <code>@CopyTarget</code> æ³¨è§£</li>
                <li>ç¡®ä¿æºç±»å’Œç›®æ ‡ç±»éƒ½æœ‰ getter/setter æ–¹æ³•</li>
                <li>è¿è¡Œ <code>mvn clean compile</code> è¿›è¡Œå®Œæ•´ç¼–è¯‘</li>
            </ol>
            
            <h3>é—®é¢˜ï¼šå­—æ®µæœªè¢«æ‹·è´</h3>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ol>
                <li>æ£€æŸ¥å­—æ®µåæ˜¯å¦å®Œå…¨ç›¸åŒï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰</li>
                <li>æ£€æŸ¥æºç±»å’Œç›®æ ‡ç±»æ˜¯å¦éƒ½æœ‰è¯¥å­—æ®µçš„ getter/setter</li>
                <li>æ£€æŸ¥è¯¥å­—æ®µæ˜¯å¦åœ¨ <code>ignore</code> å±æ€§ä¸­</li>
            </ol>
            
            <h3>é—®é¢˜ï¼šIDE ä¸­çœ‹ä¸åˆ°ç”Ÿæˆçš„ä»£ç </h3>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <ol>
                <li>åœ¨ IDE ä¸­åˆ·æ–°é¡¹ç›®ï¼ˆF5 æˆ–å³é”® -> Refreshï¼‰</li>
                <li>é‡æ–°æ„å»ºé¡¹ç›®ï¼ˆClean -> Buildï¼‰</li>
                <li>æ£€æŸ¥ IDE æ˜¯å¦å¯ç”¨äº†æ³¨è§£å¤„ç†ï¼ˆé€šå¸¸é»˜è®¤å¯ç”¨ï¼‰</li>
            </ol>
            
            <h2>ä¸‹ä¸€æ­¥</h2>
            <div class="toc">
                <ul>
                    <li><a href="reference.html">æŸ¥çœ‹å‚è€ƒæ–‡æ¡£</a> - äº†è§£æ›´å¤šåŠŸèƒ½</li>
                    <li><a href="api.html">æŸ¥çœ‹ API æ–‡æ¡£</a> - è¯¦ç»†çš„ API å‚è€ƒ</li>
                    <li><a href="faq.html">æŸ¥çœ‹å¸¸è§é—®é¢˜</a> - å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</li>
                </ul>
            </div>
            
            <h2>æç¤º</h2>
            <ul>
                <li>ä½¿ç”¨ Lombok çš„ <code>@Data</code> æ³¨è§£å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ getter/setter</li>
                <li>ç”Ÿæˆçš„ Copier ç±»æ˜¯æ— çŠ¶æ€çš„ï¼Œå¯ä»¥å®‰å…¨åœ°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨</li>
                <li>ç”Ÿæˆçš„ä»£ç æ€§èƒ½ä¸æ‰‹å†™ä»£ç ç›¸åŒ</li>
            </ul>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2026 Fast Bean Copier. All rights reserved.</p>
        <p>é‡‡ç”¨ Apache License 2.0 è®¸å¯è¯</p>
    </footer>
    
    <script src="../script.js"></script>
</body>
</html>

