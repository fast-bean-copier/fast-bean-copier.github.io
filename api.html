<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API æ–‡æ¡£ - Fast Bean Copier</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <img src="logo.png" alt="Fast Bean Copier Logo" class="logo">
                <h1>ğŸš€ Fast Bean Copier</h1>
            </div>
            <p>é«˜æ€§èƒ½çš„ Java Bean æ‹·è´å·¥å…·</p>
            <div class="version-badge">ç‰ˆæœ¬ 1.0.0</div>
        </div>
    </header>
    
    <nav>
        <ul>
            <li><a href="index.html">é¦–é¡µ</a></li>
            <li><a href="getting-started.html">å¿«é€Ÿå…¥é—¨</a></li>
            <li><a href="reference.html">å‚è€ƒæ–‡æ¡£</a></li>
            <li><a href="api.html" class="active">API æ–‡æ¡£</a></li>
            <li><a href="faq.html">å¸¸è§é—®é¢˜</a></li>
            <li><a href="summary.html">é¡¹ç›®æ€»ç»“</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <div class="content">
            <h1>Fast Bean Copier API æ–‡æ¡£</h1>
            
            <h2>æ³¨è§£</h2>
            
            <h3>@CopyTarget</h3>
            <p>æ ‡è®°ç›®æ ‡ DTO ç±»ï¼ŒæŒ‡å®šæºç±»å’Œè¦å¿½ç•¥çš„å­—æ®µã€‚</p>
            
            <h4>å£°æ˜</h4>
            <pre><code>@Target(ElementType.TYPE)
@Retention(RetentionPolicy.SOURCE)
public @interface CopyTarget {
    /**
     * æºç±»çš„ç±»å‹ã€‚å¿…éœ€ã€‚
     */
    Class&lt;?&gt; source();
    
    /**
     * è¦å¿½ç•¥çš„å­—æ®µåæ•°ç»„ã€‚å¯é€‰ã€‚
     */
    String[] ignore() default {};
}</code></pre>
            
            <h4>å±æ€§</h4>
            <table>
                <tr>
                    <th>å±æ€§</th>
                    <th>ç±»å‹</th>
                    <th>å¿…éœ€</th>
                    <th>è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>source</code></td>
                    <td><code>Class&lt;?&gt;</code></td>
                    <td>æ˜¯</td>
                    <td>æºç±»çš„ç±»å‹</td>
                </tr>
                <tr>
                    <td><code>ignore</code></td>
                    <td><code>String[]</code></td>
                    <td>å¦</td>
                    <td>è¦å¿½ç•¥çš„å­—æ®µåæ•°ç»„</td>
                </tr>
            </table>
            
            <h4>ç¤ºä¾‹</h4>
            <pre><code>// åŸºæœ¬ç”¨æ³•
@CopyTarget(source = User.class)
public class UserDto {
    // ...
}

// å¿½ç•¥å­—æ®µ
@CopyTarget(source = User.class, ignore = {"password", "token"})
public class UserResponse {
    // ...
}</code></pre>
            
            <h2>ç”Ÿæˆçš„ Copier ç±»æ–¹æ³•</h2>
            
            <h3>toDto(source)</h3>
            <p>å°†æºå¯¹è±¡è½¬æ¢ä¸ºç›®æ ‡ DTO å¯¹è±¡ã€‚</p>
            <p><strong>ç­¾åï¼š</strong></p>
            <pre><code>public static TargetType toDto(SourceType source)</code></pre>
            <p><strong>å‚æ•°ï¼š</strong> <code>source</code> - æºå¯¹è±¡</p>
            <p><strong>è¿”å›å€¼ï¼š</strong> ç›®æ ‡ DTO å¯¹è±¡ï¼Œå¦‚æœæºå¯¹è±¡ä¸º nullï¼Œè¿”å› null</p>
            <p><strong>ç¤ºä¾‹ï¼š</strong></p>
            <pre><code>User user = new User(1L, "å¼ ä¸‰", "zhangsan@example.com", 25);
UserDto userDto = UserDtoCopier.toDto(user);</code></pre>
            
            <h3>fromDto(source)</h3>
            <p>å°†ç›®æ ‡ DTO å¯¹è±¡è½¬æ¢å›æºå¯¹è±¡ï¼ˆåå‘æ‹·è´ï¼‰ã€‚</p>
            <p><strong>ç­¾åï¼š</strong></p>
            <pre><code>public static SourceType fromDto(TargetType source)</code></pre>
            <p><strong>å‚æ•°ï¼š</strong> <code>source</code> - ç›®æ ‡ DTO å¯¹è±¡</p>
            <p><strong>è¿”å›å€¼ï¼š</strong> æºå¯¹è±¡ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸º nullï¼Œè¿”å› null</p>
            <p><strong>ç¤ºä¾‹ï¼š</strong></p>
            <pre><code>UserDto userDto = new UserDto(1L, "å¼ ä¸‰", "zhangsan@example.com", 25);
User user = UserDtoCopier.fromDto(userDto);</code></pre>
            
            <h3>toDtoList(sources)</h3>
            <p>å°†æºå¯¹è±¡åˆ—è¡¨è½¬æ¢ä¸ºç›®æ ‡ DTO å¯¹è±¡åˆ—è¡¨ã€‚</p>
            <p><strong>ç­¾åï¼š</strong></p>
            <pre><code>public static List toDtoList(List sources)</code></pre>
            <p><strong>å‚æ•°ï¼š</strong> <code>sources</code> - æºå¯¹è±¡åˆ—è¡¨</p>
            <p><strong>è¿”å›å€¼ï¼š</strong> ç›®æ ‡ DTO å¯¹è±¡åˆ—è¡¨ï¼Œå¦‚æœæºåˆ—è¡¨ä¸º nullï¼Œè¿”å› null</p>
            <p><strong>ç¤ºä¾‹ï¼š</strong></p>
            <pre><code>List&lt;User&gt; users = userRepository.findAll();
List&lt;UserDto&gt; userDtos = UserDtoCopier.toDtoList(users);</code></pre>
            
            <h3>toDtoSet(sources)</h3>
            <p>å°†æºå¯¹è±¡é›†åˆè½¬æ¢ä¸ºç›®æ ‡ DTO å¯¹è±¡é›†åˆã€‚</p>
            <p><strong>ç­¾åï¼š</strong></p>
            <pre><code>public static Set toDtoSet(Set sources)</code></pre>
            <p><strong>å‚æ•°ï¼š</strong> <code>sources</code> - æºå¯¹è±¡é›†åˆ</p>
            <p><strong>è¿”å›å€¼ï¼š</strong> ç›®æ ‡ DTO å¯¹è±¡é›†åˆï¼Œå¦‚æœæºé›†åˆä¸º nullï¼Œè¿”å› null</p>
            <p><strong>ç¤ºä¾‹ï¼š</strong></p>
            <pre><code>Set&lt;User&gt; users = new HashSet&lt;&gt;(userRepository.findAll());
Set&lt;UserDto&gt; userDtos = UserDtoCopier.toDtoSet(users);</code></pre>
            
            <h3>fromDtoList(sources)</h3>
            <p>å°†ç›®æ ‡ DTO å¯¹è±¡åˆ—è¡¨è½¬æ¢å›æºå¯¹è±¡åˆ—è¡¨ï¼ˆåå‘æ‹·è´ï¼‰ã€‚</p>
            <p><strong>ç­¾åï¼š</strong></p>
            <pre><code>public static List fromDtoList(List sources)</code></pre>
            <p><strong>å‚æ•°ï¼š</strong> <code>sources</code> - ç›®æ ‡ DTO å¯¹è±¡åˆ—è¡¨</p>
            <p><strong>è¿”å›å€¼ï¼š</strong> æºå¯¹è±¡åˆ—è¡¨ï¼Œå¦‚æœç›®æ ‡åˆ—è¡¨ä¸º nullï¼Œè¿”å› null</p>
            
            <h3>fromDtoSet(sources)</h3>
            <p>å°†ç›®æ ‡ DTO å¯¹è±¡é›†åˆè½¬æ¢å›æºå¯¹è±¡é›†åˆï¼ˆåå‘æ‹·è´ï¼‰ã€‚</p>
            <p><strong>ç­¾åï¼š</strong></p>
            <pre><code>public static Set fromDtoSet(Set sources)</code></pre>
            <p><strong>å‚æ•°ï¼š</strong> <code>sources</code> - ç›®æ ‡ DTO å¯¹è±¡é›†åˆ</p>
            <p><strong>è¿”å›å€¼ï¼š</strong> æºå¯¹è±¡é›†åˆï¼Œå¦‚æœç›®æ ‡é›†åˆä¸º nullï¼Œè¿”å› null</p>
            
            <h2>ç±»å‹è½¬æ¢</h2>
            
            <h3>æ”¯æŒçš„ç±»å‹è½¬æ¢</h3>
            <table>
                <tr>
                    <th>æºç±»å‹</th>
                    <th>ç›®æ ‡ç±»å‹</th>
                    <th>è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>int</code></td>
                    <td><code>Integer</code></td>
                    <td>è‡ªåŠ¨è£…ç®±</td>
                </tr>
                <tr>
                    <td><code>Integer</code></td>
                    <td><code>int</code></td>
                    <td>è‡ªåŠ¨æ‹†ç®±ï¼Œnull è½¬æ¢ä¸º 0</td>
                </tr>
                <tr>
                    <td><code>long</code></td>
                    <td><code>Long</code></td>
                    <td>è‡ªåŠ¨è£…ç®±</td>
                </tr>
                <tr>
                    <td><code>Long</code></td>
                    <td><code>long</code></td>
                    <td>è‡ªåŠ¨æ‹†ç®±ï¼Œnull è½¬æ¢ä¸º 0L</td>
                </tr>
                <tr>
                    <td><code>double</code></td>
                    <td><code>Double</code></td>
                    <td>è‡ªåŠ¨è£…ç®±</td>
                </tr>
                <tr>
                    <td><code>Double</code></td>
                    <td><code>double</code></td>
                    <td>è‡ªåŠ¨æ‹†ç®±ï¼Œnull è½¬æ¢ä¸º 0.0</td>
                </tr>
                <tr>
                    <td><code>float</code></td>
                    <td><code>Float</code></td>
                    <td>è‡ªåŠ¨è£…ç®±</td>
                </tr>
                <tr>
                    <td><code>Float</code></td>
                    <td><code>float</code></td>
                    <td>è‡ªåŠ¨æ‹†ç®±ï¼Œnull è½¬æ¢ä¸º 0.0f</td>
                </tr>
                <tr>
                    <td><code>boolean</code></td>
                    <td><code>Boolean</code></td>
                    <td>è‡ªåŠ¨è£…ç®±</td>
                </tr>
                <tr>
                    <td><code>Boolean</code></td>
                    <td><code>boolean</code></td>
                    <td>è‡ªåŠ¨æ‹†ç®±ï¼Œnull è½¬æ¢ä¸º false</td>
                </tr>
            </table>
            
            <h2>Null å€¼å¤„ç†</h2>
            
            <h3>å¯¹è±¡çº§åˆ«çš„ null å¤„ç†</h3>
            <pre><code>UserDto dto = UserDtoCopier.toDto(null);  // è¿”å› null
User user = UserDtoCopier.fromDto(null);  // è¿”å› null
List&lt;UserDto&gt; dtos = UserDtoCopier.toDtoList(null);  // è¿”å› null</code></pre>
            
            <h3>å­—æ®µçº§åˆ«çš„ null å¤„ç†</h3>
            <p>åœ¨å­—æ®µæ˜ å°„æ—¶ï¼Œnull å€¼ä¼šè¢«ä¿ç•™ã€‚</p>
            
            <h3>åŒ…è£…ç±»å‹ null è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹</h3>
            <pre><code>@CopyTarget(source = UserDto.class)
public class User {
    private int age;  // åŸºæœ¬ç±»å‹
}

UserDto userDto = new UserDto();
userDto.setAge(null);  // age ä¸º null

User user = UserDtoCopier.fromDto(userDto);
// user.age ä¸º 0ï¼ˆint çš„é»˜è®¤å€¼ï¼‰</code></pre>
            
            <h2>å­—æ®µå¿½ç•¥</h2>
            
            <h3>ä½¿ç”¨ ignore å±æ€§</h3>
            <pre><code>@CopyTarget(source = User.class, ignore = {"password", "token"})
public class UserDto {
    private Long id;
    private String name;
    private String email;
    // password å’Œ token ä¸ä¼šè¢«æ‹·è´
}</code></pre>
            
            <h2>çº¿ç¨‹å®‰å…¨æ€§</h2>
            <p>ç”Ÿæˆçš„ Copier ç±»æ˜¯æ— çŠ¶æ€çš„ï¼Œå¯ä»¥å®‰å…¨åœ°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ã€‚</p>
            <pre><code>// åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å®‰å…¨ä½¿ç”¨
ExecutorService executor = Executors.newFixedThreadPool(10);
for (User user : users) {
    executor.submit(() -> {
        UserDto dto = UserDtoCopier.toDto(user);
        // å¤„ç† dto
    });
}</code></pre>
            
            <h2>æ€§èƒ½ç‰¹æ€§</h2>
            <ul>
                <li><strong>ç¼–è¯‘æœŸä»£ç ç”Ÿæˆ</strong> - æ— è¿è¡Œæ—¶å¼€é”€</li>
                <li><strong>æ— åå°„</strong> - ç›´æ¥è°ƒç”¨ getter/setter</li>
                <li><strong>æ— åŠ¨æ€ä»£ç†</strong> - ç”Ÿæˆçš„ä»£ç æ˜¯æ™®é€š Java ä»£ç </li>
                <li><strong>å†…è”å‹å¥½</strong> - JIT ç¼–è¯‘å™¨å¯ä»¥å†…è”ç”Ÿæˆçš„ä»£ç </li>
            </ul>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2025 Fast Bean Copier. All rights reserved.</p>
        <p>é‡‡ç”¨ Apache License 2.0 è®¸å¯è¯</p>
    </footer>
</body>
</html>
